<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>p1</title>
<style>
    body {
    font-family: Arial, sans-serif;
    background-color: #ffffff;
    margin: 0;
    padding: 0;
   }
   .container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 5px;
    padding: 5px;
    margin-top: 94px;
   }
      .search-container {
      display: flex;
      position: fixed;
      top:0;
      left: 0;
      right: 0;
      z-index: 10;
      align-items: center;
      background-color: #fff;
      border-radius: 25px;
      padding: 7px 15px;
      border-bottom: 1px solid #ddd;
    }

    .search-container input {
      border: none;
      outline: none;
      padding: 10px;
      font-size: 16px;
      width: 250px;
      border-radius: 20px;
      margin-right: 50px;
      box-sizing: border-box;
    }

    .search-container button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 20px;
      cursor: pointer;
    }

    .search-container button:hover {
      background-color: #45a049;
    }
  .nav a {
    text-decoration: none;
    color: inherit;
}
   .nav {
    display: flex;
    overflow-x: auto; 
    white-space: nowrap;
    background-color: #fff;
    border-bottom: 1px solid #ddd;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    padding: 0px 0;
    position: fixed;
    top:50px;
    left: 0;
    right: 0;
    z-index: 9;
    scrollbar-width: none;
    -ms-overflow-style: none;
}
.nav::-webkit-scrollbar {
    display: none;
}
    .nav div {
        font-size: 14px;
        color: #555;
        cursor: pointer;
        padding: 13px 10px;
    }
  .nav div.active {
    font-weight: bold;
    padding-bottom: 5px;
    color: transparent;
    background: linear-gradient(90deg, #6ec1ff, #ab47bc);
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent;
    position: relative;
}
.nav div.active::after {
    content: '';
    display: block;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, #6ec1ff, #ab47bc);
    border-radius: 2px;
    position: absolute;
    bottom: 0;
    left: 0;
}
   .blog {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 3px;
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    position: relative;
    display: flex;
    flex-direction: column;
    height: 100%;
    border-bottom-left-radius: 15px; 
    border-bottom-right-radius: 15px; 
   }
   .blog img {
    width: 100%;
    aspect-ratio: 4 / 5;
    object-fit: contain;
    display: block; 
    margin: 0; 
    padding: 0; 
    border-bottom: 1px solid #ddd;
    border-bottom-left-radius: 15px; 
    border-bottom-right-radius: 15px; 
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
   }
   .blog-info {
    padding: 8px;
    text-align: left;
   }
   .blog-info .description {
    font-size: 13.5px;
    color: ##1E1E26;
    margin: 0;
    display: -webkit-box;
   -webkit-box-orient: vertical;
   -webkit-line-clamp: 2;
    overflow: hidden;
    text-overflow: ellipsis;
   }
   .blog-info .price {
    font-size: 16px;
    font-weight: bold;
    color: #000;
    margin-top: 10px;
    margin-bottom :10px;
   }
  .blog-info .ratting {
   padding-left: 0px;
   margin-top: 0px;
   display: flex;
   align-items: center;
  }
  .blog-info .ratting .sr {
   width: 12px;
   height: 12px;
   fill: #FFC50A;
   margin-right: 2px; 
   }
  .blog-info .score {
   color: #777;
   font-weight: 500;
   font-size: 10px;
   margin-top: 2px;
   margin-left: 2px;
  }
.alternating-titles {
  font-size: 12px;
    color: #555;
    position: absolute;
    bottom: 0;
    left: 5px;
    right: 5px;
    text-align: left;
    overflow: hidden;
    height: 16px;
    display: flex;
    align-items: center;
}

.mp {
  display: block;
  margin-right: 5px;
  color: #4CAF50;
  font-size: 20px;
  position: absolute; /* لجعلها تتداخل مع t1 */
  opacity: 0;
  animation: alternateFadeMP 6s infinite; /* تغيير الأنيمشن لتتزامن مع t1 */
}

/* أنيمشن منفصل لـ mp */
@keyframes alternateFadeMP {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  10%, 40% {
    opacity: 1;
    transform: translateY(0);
  }
  50% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 0;
  }
}
.B1 {
  display: block;
  left:0;
  width:30px;
  height:30px;
  margin-right: 5px;
  border-radius:50px;
  color: #4CAF50;
  position: absolute; /* لجعلها تتداخل مع t1 */
  opacity: 0;
  animation: alternateFadeMP 6s infinite; /* تغيير الأنيمشن لتتزامن مع t1 */
  animation-delay: 2.5s; /* Start after the first title */
}
.B1 .img {
  border-radius:50px;
}
@keyframes alternateFadeB1 {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  10%, 60% { /* جعل t2 يظهر لفترة أطول */
    opacity: 1;
    transform: translateY(0);
  }
  70% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 0;
  }
}

.t1, .t2 {
  position: absolute;
  margin-left: 17px;
  opacity: 0;
}

.t1 {
  animation: alternateFadeT1 6s infinite; /* أنيمشن خاص بـ t1 */
  animation-delay: 0s; /* Start immediately */
}

.t2 {
  animation: alternateFadeT2 6s infinite; /* أنيمشن خاص بـ t2 */
  animation-delay: 2.5s; /* Start after the first title */
}

/* Animations for t1 */
@keyframes alternateFadeT1 {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  10%, 40% {
    opacity: 1;
    transform: translateY(0);
  }
  50% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 0;
  }
}

/* Animations for t2 */
@keyframes alternateFadeT2 {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  10%, 60% { /* جعل t2 يظهر لفترة أطول */
    opacity: 1;
    transform: translateY(0);
  }
  70% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 0;
  }
}
   #product-modal {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    align-items: flex-end;
    justify-content: center;
   }
   #product-modal .modal-content {
    position: relative;
    width: 100%;
    max-width: 500px;
    max-height: 100vh;
    background: #fff;
    overflow-y: auto ;
    animation: slide-up 0.3s ease-out;
   }
   #product-modal .modal-content img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
   }
   @keyframes slide-up {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
 }
#product-modal #slideshow {
  display: flex; /* ترتيب الشرائح أفقيًا */
  overflow-x: scroll; /* تمكين التمرير الأفقي */
  scroll-snap-type: x mandatory; /* التمرير يلتقط الشرائح بشكل دقيق */
  scroll-behavior: smooth; /* تمرير سلس */
}

#product-modal .slide {
  min-width: 100%; /* كل شريحة تأخذ عرض الحاوية بالكامل */
  scroll-snap-align: start; /* التمرير يلتقط بداية الشريحة */
}

#product-modal .slide img {
  width: 100%; /* تأخذ الصورة عرض الشريحة بالكامل */
  height: 350px; /* تثبيت ارتفاع الصورة */
  object-fit: contain; /* الحفاظ على أبعاد الصورة بدون تشويه */
}
#product-modal .modal-description-container {
  display: flex;
  flex-direction: column;
  padding: 5px 10px;
  position: relative;
  overflow: visible;
}
#product-modal .modal-description-container .description {
  margin: 0;
  font-size: 18px;
  font-weight: 450;
  white-space: normal;
  word-wrap: break-word;
  overflow-wrap: break-word;
}
#product-modal .price {
  font-family: 'Helvetica', sans-serif;
  font-size: 19px; 
  font-weight: 700; 
  color: #333; 
  padding: 0px;
  text-align: left; 
  margin-top: 10px;
  margin-bottom: 2px;
}
#product-modal .ratting {
  margin-top: 12px;
  margin-bottom: -10px;
  display: flex;
  align-items: center;
}
#product-modal .ratting .sr {
  width: 16px;
  height: 16px;
  fill: #F6B01D;
  margin-right: 2px; 
}
#product-modal .ratting .score {
  color: #777;
  font-weight: 500;
  font-size: 12px;
  margin-top: 2px;
  margin-left: 2px;
}
#product-modal .image-section {
  padding: 0 10px;
  margin-bottom: -11px;
}
#product-modal .image-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
#product-modal .image-label {
  font-size: 13px;
  font-weight: bold;
}
#product-modal .image-selection {
  display: flex;
  gap: 10px;
}
#product-modal .image-option {
  width: 40px;
  height: 40px;
  border-radius :10px;
  border: 2px solid #ddd;
  cursor: pointer;
  transition: transform 0.2s ease-in-out;
}
#product-modal .image-option img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
#product-modal .image-option:hover {
  transform: scale(1.1);
  border-color: #333;
}
#product-modal .s-section {
  max-width: 600px;
  margin: auto;
  border-radius:15px;
  padding: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
#product-modal .s-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: -px;
}
#product-modal .s-label {
  font-weight: bold;
  font-size: 13px;
}
#product-modal .Guide {
  font-size: 12px;
  color: #25629A;
  cursor: pointer;
  text-decoration: none; 
  font-weight: 500;
  margin-bottom :-5px;
}
#product-modal .s-selection {
  display: flex;
  gap: 10px;
  font-size: 14px;
}
#product-modal .s-option {
  width: 70px;
  height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #ccc;
  cursor: pointer;
  font-weight: bold;
}
#product-modal .h2 {
   padding: 0 10px;
   margin-top: 15px;
   margin-bottom: 12px;
  font-size: 15px;
  font-weight: 650;
  
}
#product-modal .product-list {
  display: flex;
  justify-content: space-around;
  gap: 20px;
  padding: 0 10px;
  overflow-x: auto;
  margin-bottom: 80px;
}
#product-modal .product-item {
  width: 180px;
  height:280px;
  text-align: center;
  font-family: Arial, sans-serif;
  background-color: #fff;
  border-radius: 10px;
  border: 1px solid #ddd; 
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
#product-modal .product-item img {
  width: 180px;
  height: 175px;
  border-radius: 10px;
  border-bottom: 1px solid #ddd;
    border-bottom-left-radius: 15px; 
    border-bottom-right-radius: 15px; 
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}
#product-modal .product-item .description {
  font-size: 14px;
  margin-left:10px;
  margin-top: 11px;
  color: #333;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
  text-align: center; 
}
#product-modal .ratting2 {
  margin-top: 2px;
  margin-bottom: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
}
#product-modal .ratting2 .sr2 {
  width: 14px;
  height: 14px;
  fill: #F6B01D;
  margin-right: 2px; 
}
#product-modal .ratting2 .score2 {
  color: #777;
  font-weight: 500;
  font-size: 12px;
  margin-top: 2px;
  margin-left: 2px;
}
#product-modal .product-item .price {
  font-family: 'Helvetica', sans-serif;
  font-weight: bold;
  text-align: center;
  font-size: 16px;
  color: #000;
}
#product-modal .m-container {
  position: fixed;
  bottom: 0;
  left: 0;
  margin: 0;
  width: 100%;
  z-index: 1000;
  border-top-left-radius: 50px;
  border-top-right-radius: 50px;
  display: flex;
  align-items: center;
  justify-content: center; 
  background-color: #ffffff;
  padding: 15px 0;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
}
  #product-modal .m-container .main-button {
  width:330px;
  height:40px;
  margin-right: 5px;
  background-color: #00579C; 
  color: white;
  border: none;
  border-radius: 10px;
  padding: 10px 0;
  font-size: 16px;
  font-weight: bold;
  text-align: center;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); 
 }
 #product-modal .close-btn {
  position: absolute;
  top: 15px;
  left: 15px;
  background-color: #ffffff;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
#product-modal .close-btn:hover {
  background-color: #f0f0f0;
}
#product-modal .close-btn svg {
  fill: black;
  width: 24px;
  height: 24px;
}
#iframe-modal {
  display: none;
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 1000;
  align-items: flex-end;
  justify-content: center;
}
#iframe-modal .modal-content {
  position: fixed;
  width: 100%;
  max-width: 500px;
  height: 100vh;
  background: #fff;
  border-radius: 10px;
  overflow: hidden;
  z-index: 1000; 
  animation: iframe-slide-up 0.3s ease-out;
}
#iframe-content {
  width: 103%; 
  height: 130vh; 
  border: none; 
  border-radius: 0;
  margin-top: -70px;
  display: block;
  margin-left: -3px;
  margin-right: -3px;
}
@keyframes iframe-slide-up {
  from {
        transform: translateY(100%);
        opacity: 0;
    }
   to {
        transform: translateY(0);
        opacity: 1;
    }
}
#iframe-modal .close-btn {
  position: absolute;
  top: 15px;
  left: 15px;
  background-color: #ffffff;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
#iframe-modal .close-btn:hover {
  background-color: #e0e0e0;
}
#iframe-modal .close-btn svg {
  fill: black ;
  width: 20px;
  height: 20px;
}
</style>
</head>
<body>
   <div class="search-container">
    <input type="text" placeholder="Recherche..." id="search-input">
    <button onclick="search()">search</button>
  </div>
<!-- Navigation -->
<div class="nav">
<div class="active"><a href="#">Vestes</a></div>
 <div><a href="/T2-main/index2.html">Chaussures</a></div>
  <div><a href="/T2-main/index3.html">pantalon</a></div>
  <div><a href="/T2-main/index4.html">Médecins</a></div>
  <div><a href="/T2-main/index5.html">Éducation</a></div>
    <div><a href="/T2-main/index6.html">Immobilier</a></div>
  <div><a href="//T2-main/index7.html">Services de mariage</a></div>
</div>
 <div class="container" id="products-container"></div>
 <div class="modal" id="product-modal">
 <div class="modal-content">
 <button class="close-btn" id="close-modal">
 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
 <path fill="none" d="M0 0h24v24H0z" />
 <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z" /></svg>
 </button>
 <div id="slideshow"></div>
 <div id="pagination-dots" class="pagination-dots"></div>
 <div class="modal-description-container" id="modal-description-container"></div>
 <p id="modal-price"></p>
<div class="image-section">
<div class="image-header">
<p class="image-label">Couleur:</p>
</div>
<div class="image-selection">
<div class="image-option">
<img src="https://via.placeholder.com/50x50" alt="Option 1">
</div>
<div class="image-option">
<img src="https://via.placeholder.com/50x50" alt="Option 2">
</div>
<div class="image-option">
<img src="https://via.placeholder.com/50x50" alt="Option 3">
</div>
<div class="image-option">
<img src="https://via.placeholder.com/50x50" alt="Option 4">
    </div>
  </div>
</div>
<div class="s-section">
<div class="s-header">
<p class="s-label">Size:</p>
<a href="https://www.example.com" target="_blank" id="size-info-title" class="Guide">Guide des tailles</a>
</div>
<div class="s-selection">
<div class="s-option">S</div>
<div class="s-option">M</div>
<div class="s-option">L</div>
<div class="s-option">XL</div>
<div class="s-option">XXL</div>
</div>
</div>
<p class="h2">Vous pourriez aussi aimer</p>
<div class="product-list" id="product-list"></div>
  </div>
</div>
<div class="modal" id="iframe-modal">
 <div class="modal-content">
 <button class="close-btn" id="close-iframe-modal">
 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
 <path fill="none" d="M0 0h24v24H0z" />
 <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z" />
 </svg>
 </button>
 <iframe id="iframe-content" frameborder="0"></iframe>
  </div>
</div>
 <script>
 const products = [
     {
            images: [
                    "../image/veste/31zyWkrw-ML._AC_UX450_UY450_SR450,450_.jpg",
                    "../image/veste/41CqD4KLvkL._AC_UX450_UY450_SR450,450_.jpg",
                    "../image/veste/41GWvGqeK-L._AC_UX450_UY450_SR450,450_.jpg",
                    "../image/veste/41WBWHvblvL._AC_UX450_UY450_SR450,450_.jpg",
                ],
                description: "PREMIA - t-shirt légères et respirantes pour homme.",
                price: "46.00 TND",
                ratting: 4.5
            },
            {
                images: [
                    "../image/veste/41bDnIpeWaL._AC_UX450_UY450_SR450,450_.jpg",
                    "../image/veste/41l8sOL+xRL._AC_UX450_UY450_SR450,450_.jpg",
                   "../image/P/images (12) (20).jpeg",
                    "../image/P/images (12) (25).jpeg"
                ],
                description: "Comfortable and lightweight running shoes.",
                price: "46.00 TND",
                ratting: 4.5
            },
            {
                images: [
                     "../image/veste/41CqD4KLvkL._AC_UX450_UY450_SR450,450_.jpg",
                    "../image/P/images (12) (22).jpeg",
                    "../image/P/images (12) (20).jpeg",
                    "../image/P/images (12) (21).jpeg"
                ],
                description: "Comfortable and lightweight running shoes.",
                price: "46.00 TND",
                ratting: 4.5
            },
            {
                images: [
                    "../image/veste/41GWvGqeK-L._AC_UX450_UY450_SR450,450_.jpg",
                    "../image/P/images (12) (20).jpeg",
                    "../image/P/images (12) (20).jpeg",
                    "../image/P/images (12) (21).jpeg"
                ],
                description: "Comfortable and lightweight running shoes.",
                price: "46.00 TND",
                ratting: 4.5
            },
            {
                images: [
                    "../image/veste/41WBWHvblvL._AC_UX450_UY450_SR450,450_.jpg",
                    "/T2-main/image/products/images (12) (22).jpeg",
                    "/T2-main/image/products/images (12) (20).jpeg"
                ],
                description: "Comfortable and lightweight running shoes.",
                price: "46.00 TND",
                ratting: 4.5
            },
            {
                images: [
                   "../image/veste/41l8sOL+xRL._AC_UX450_UY450_SR450,450_.jpg",
                    "/T2-main/image/products/images (12) (21).jpeg",
                    "/T2-main/image/products/images (12) (21).jpeg"
                ],
                description: "Stylish and convenient slip-on design.",
                price: "32.00 TND",
                ratting: 4.8
            }
        ];
  const searchInput = document.getElementById('search-input');
  const container = document.getElementById('products-container');
  const modal = document.getElementById('product-modal');
  const slideshow = document.getElementById('slideshow');
  const modalDescriptionContainer = document.getElementById('modal-description-container');
  const modalPrice = document.getElementById('modal-price');
  const closeModal = document.getElementById('close-modal');
  const productList = document.getElementById('product-list');
  const iframeModal = document.getElementById('iframe-modal');
  const closeIframeModal = document.getElementById('close-iframe-modal');
  const iframeContent = document.getElementById('iframe-content');
  const paginationDots = document.getElementById('pagination-dots');

  // متغيرات تتبع للحالة الحالية
  let currentModalProduct = null;
  let currentOpenBlog = null;
  let isProductFromHomepage = true;

window.onload = function() {
  displayProducts(products); // عرض جميع المنتجات عند تحميل الصفحة
};

// دالة البحث
function search() {
  const query = searchInput.value.toLowerCase();
  const filteredProducts = products.filter(product =>
    product.description.toLowerCase().includes(query)
  );
  displayProducts(filteredProducts); // عرض المنتجات المفلترة
}

// دالة لعرض المنتجات
function displayProducts(productsToDisplay) {
  container.innerHTML = ''; // مسح المنتجات السابقة قبل عرض المفلترة

  // تكرار المنتجات وإضافة الأحداث
  productsToDisplay.forEach((product, index) => {
    const blog = document.createElement('div');
    blog.classList.add('blog');
    blog.innerHTML = `
      <img src="${product.images[0]}" alt="Product ${index + 1}" loading="lazy">
      <div class="blog-info">
         <p class="description">
                ${product.description}
            </p>
             <p class="price">${product.price}</p>
            <p class="ratting">
            <svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
                <span class="score">${product.ratting}</span></p>
           <div class="alternating-titles">
  <svg class="mp" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
    <path d="M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5S13.38 11.5 12 11.5z"></path>
  </svg>
  <span class="t1">Adresse de la boutique</span>
    <img class="B1" src="/img boutiques/images (12) (26).jpeg" alt="Option 4">
  <span class="t2">Boutique 1</span>
</div>
</div>
    `;

    // إضافة أحداث للنقر
    blog.addEventListener('click', () => {
      highlightCurrentBlog(blog);
      displayModal(product);
    });

    blog.querySelector('.alternating-titles').addEventListener('click', (event) => {
      event.stopPropagation(); // منع الحدث من الانتشار إلى العناصر الأب
      openIframeModal();
    });

    container.appendChild(blog);
  });
}
   
  // وظيفة لتحديث محتوى النافذة المنبثقة
  function updateModalContent(product) {
  modalDescriptionContainer.innerHTML = `
  <p class="description">
   ${product.description}</p>
    <p class="price">${product.price}</p>
   <p class="ratting">
            <svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
                <span class="score">${product.ratting}</span></p>
  <div class="m-container">
  <button class="main-button">Adresse de la boutique</button>
    </div>
   </div>
 </div>
 `;
  // إضافة مستمع حدث للنقر لفتح نافذة iframe المنبثقة
  modalDescriptionContainer.querySelector('.main-button').addEventListener('click', (event) => {
  event.stopPropagation();
  openIframeModal();
  });
  updateProductList(product);
}

  // وظيفة لتحديث عرض الشرائح
  function updateSlideshow(images) {
  slideshow.innerHTML = '';

  images.forEach((image, index) => {
    const slide = document.createElement('div');
    slide.classList.add('slide');
    slide.innerHTML = `<img src="${image}" alt="Slide ${index + 1}" loading="lazy">`;
    slideshow.appendChild(slide);
  });

  let currentIndex = 0;
  let autoScrollInterval = setInterval(scrollToNextSlide, 1000);

  function scrollToNextSlide() {
    currentIndex = (currentIndex + 1) % images.length;
    slideshow.scrollLeft = slideshow.offsetWidth * currentIndex;
  }

  function stopAutoScroll() {
    clearInterval(autoScrollInterval);
  }

  // Stop auto-scroll on manual scroll
  slideshow.addEventListener('scroll', () => {
    stopAutoScroll();
  });

  // Optional: Restart auto-scroll after a period of inactivity
  let manualScrollTimeout;
  slideshow.addEventListener('scroll', () => {
    clearTimeout(manualScrollTimeout);
    manualScrollTimeout = setTimeout(() => {
      autoScrollInterval = setInterval(scrollToNextSlide, 1000);
    }, 7000); // 5 seconds of inactivity
  });

  setTimeout(() => {
    slideshow.scrollLeft = 0;
  }, 0);
}
  // وظيفة لتحديث قائمة المنتجات في النافذة المنبثقة
  function updateProductList(currentProduct)
  {
  const sortedProducts = [currentProduct, ...products.filter(prod => prod !== currentProduct)];
  productList.innerHTML = ''; // مسح المحتوى القديم
  sortedProducts.forEach((prod) => {
  const productItem = document.createElement('div');
  productItem.classList.add('product-item');
  productItem.innerHTML = `
  <img src="${prod.images[0]}" alt="Product image" loading="lazy">
  <p class="description">${prod.description}</p>
  <p class="ratting2">
            <svg class="sr2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
<svg class="sr2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
  <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.2 23 46 46.4 33.7L288 439.6l130.6 68.7c23.4 12.3 50.9-7.5 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6l-146.1-21.3L316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z" />
</svg>
                <span class="score2">${prod.ratting}</span></p>
  <p class="price">${prod.price}</p>`;
  productItem.addEventListener('click', () =>
  {
  modal.style.display = 'none';
      displayModal(prod);
  });
  productList.appendChild(productItem);
  });
  setTimeout(() => {
    productList.scrollLeft = 0; 
  }, 0);
}
  // وظيفة لتظليل العنصر الحالي
  function highlightCurrentBlog(blog) {
    if (currentOpenBlog && currentOpenBlog !== blog) 
    currentOpenBlog = blog;
  }
 // وظيفة لعرض نافذة المنتج
  function displayModal(product) {
  currentModalProduct = product;
  updateSlideshow(product.images);
  updateModalContent(product);
  modal.style.display = 'flex';

  // إعادة التمرير لأعلى العنصر .modal-content
  const modalContent = modal.querySelector('.modal-content');
  if (modalContent) {
    modalContent.scrollTop = 0;
  }

  document.body.style.overflow = 'hidden';
  if (isProductFromHomepage) {
    history.pushState({ productModalOpen: true }, '', location.pathname + "#product-modal");
    isProductFromHomepage = false;
  }
}
  function openIframeModal() {
  iframeModal.style.display = 'flex';
  iframeContent.src = "https://www.google.com/maps/d/u/0/embed?mid=1Cr7b5xePZ3C0B747aW61R30mDt2c-DY&ehbc=2E312F";
  document.body.style.overflow = 'hidden';
  modal.style.overflow = 'hidden';
  history.pushState({ iframeModalOpen: true }, '', location.pathname + "#iframeModal");
}
  function closeAllModals() {
  if (iframeModal.style.display === 'flex') {
    iframeModal.style.display = 'none';
    iframeContent.src = "";
    history.replaceState(null, '', location.pathname);
    modal.style.overflow = 'auto';
  }
  if (modal.style.display === 'flex') {
    modal.style.display = 'none';
    isProductFromHomepage = true;
    history.replaceState(null, '', location.pathname);
    document.body.style.overflow = 'auto';
  }
  if (iframeModal.style.display === 'none' && modal.style.display === 'none') {
    document.body.style.overflow = 'auto';
  }
}
window.addEventListener('popstate', (event) => {
  if (event.state && event.state.iframeModalOpen) {
    iframeModal.style.display = 'flex';
    modal.style.display = 'none';
    document.body.style.overflow = 'hidden'; 
  } else if (event.state && event.state.productModalOpen) {
    modal.style.display = 'flex';
    iframeModal.style.display = 'none';
    document.body.style.overflow = 'hidden';
  } else {
    closeAllModals();
  }
});
</script>
</body>
</html>
